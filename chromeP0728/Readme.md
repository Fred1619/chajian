DEMO
===========================

# 环境依赖
Chrome102.0.5005.115+

# 部署步骤
1. 打开Chrome浏览器-管理扩展程序
2. 加载已解压的扩展程序


# 目录结构描述
├── Readme.md
├── File // 项目相关文件，测试用文档
├── JSlib // 项目所需的开源JS库
├── Plugin // 测试demo存放库
├── Avator.png // 插件头像/缩略图
├── background.js // 插件后台
├── common.js // 默认参数
├── frayImgGetData.js // 图片灰度化处理并获取Hex数据文件
├── mainifest.js // Chrome插件注册文件
├── pdf2image.js // pdf转img并绘制
├── pdftoimgtohandledata.js // pad转img并灰度化处理图片并获取Hex数据文件
├──pdftoimgtohandledata2_img.js // pdf转img并使用误差扩散法灰度化处理图片并获取Hex数据文件
├── popup.html // 插件弹窗页面(禁用)
├── popup.js // 插件弹窗页面相关js(禁用)
├── setting.js // 插件属性设定，并推送设定到打印机
├── test.html // 插件页面
└── test.js // 插件页面相关js


# V1.0.0 版本内容更新
1. 新功能     实现连接打印机
2. 新功能     实现输入命令并控制打印机输出
3. 新功能     实现pdf转img，并绘制在画布中
4. 新功能     实现img的二值化，并将黑白化图片绘制到画布中，并输出二值化图片的Hex文件
5. 新功能     实现img的误差扩散灰度处理，并绘制到画布中


# To-do List
- [x] 已完成的项目
	- [x] 连接打印机
	- [x] 输入命令并输出到打印机
	- [x] pdf转图片
	- [x] 图片灰度处理（误差扩散/二值法）
	- [x] pdf转图片后灰度处理
	- [x] 插件属性设定并设定打印机
	- [x] UI优化
- [ ] 待处理
	- [ ] 优化插件处理相应速度
	- [ ] 优化插件可以在不关闭/刷新的情况下继续打印
	- [ ] 优化回调，可以一次性读取并抵达打印阶段，无需刷新多次以读取变量
	
	


# 图片处理思路
```
graph TD

A[pdf转img] 
A -->|One| B[获得已经绘制的原图画布] -->C[获取原图画布上像素数据] -->D[黑白处理得到的像素数据] -->E[输出画布并得到Hex数据]
A -->|Two| F[获得图片的Base64地址url] -->G[图片url转图片对象] -->H[将获得的图片对象输入对应处理脚本中] -->I[输出得到画布和Hex数据]



```

